<Window
  x:Class="MarketCountdownApp.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="clr-namespace:MarketCountdownApp"
  Title="Market Countdown"
  WindowStyle="None"
  ResizeMode="NoResize"
  Width="600"
  Height="530"
  Background="Transparent"
  AllowsTransparency="True">

    <!-- ================= -->
    <!--  Window.Resources  -->
    <!-- ================= -->
    <Window.Resources>
        <local:StatusToBrushConverter x:Key="StatusToBrushConverter"/>
        <local:ProgressToArcConverter  x:Key="ProgressToArcConverter"/>
        <local:ImpactToBrushConverter x:Key="ImpactToBrushConverter" />


        <Style x:Key="CurrencyTagStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding"     Value="4,2"/>
            <Setter Property="Margin"      Value="6,0"/>
            <Setter Property="Background"  Value="LightGray"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Currency}" Value="USD">
                    <Setter Property="Background" Value="Crimson"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="CHF">
                    <Setter Property="Background" Value="#F39C12"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="CAD">
                    <Setter Property="Background" Value="#9B59B6"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="EUR">
                    <Setter Property="Background" Value="#2ECC71"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="AUD">
                    <Setter Property="Background" Value="#3498DB"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="GBP">
                    <Setter Property="Background" Value="#FFD700"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="CNY">
                    <Setter Property="Background" Value="#20B2AA"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="NZD">
                    <Setter Property="Background" Value="#FF69B4"/>
                </DataTrigger>
                <DataTrigger Binding="{Binding Currency}" Value="JPY">
                    <Setter Property="Background" Value="#95A5A6"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="LocalTimeStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="Gray"/>
            <Setter Property="FontSize"   Value="11"/>
        </Style>
    </Window.Resources>

    <!-- ================= -->
    <!--   Main Container  -->
    <!-- ================= -->
    <Border Background="#B0B0B0" CornerRadius="15" SnapsToDevicePixels="True">
        <Grid>
            <!-- three rows: 0=tiles, 1=list, 2=footer/date -->
            <Grid.RowDefinitions>
                <RowDefinition Height="240"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- ==================================== -->
            <!--  2×2 Grid of Market Tiles (Row 0)    -->
            <!-- ==================================== -->
            <UniformGrid
                Grid.Row="0"
                Rows="2"
                Columns="2"
                Margin="8"
                DataContext="{Binding MarketVM}">
                <!-- moved into the start‑tag -->
            
                <!-- London Tile -->
                <Border Background="White" CornerRadius="12" Margin="4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>
                        <Image Grid.Column="0"
                   Source="pack://siteoforigin:,,,/Icons/London.png"
                   Width="75" Height="75"
                   HorizontalAlignment="Center"
                   Margin="10,0,0,0"
                   VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Stretch">
                            <!-- City name, centered -->
                            <TextBlock Text="London"
                                       FontSize="14"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                            <!-- Big offset display, bold, larger, centered -->
                            <TextBlock Text="{Binding LondonDisplay}"
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                        <TextBlock Grid.Column="2"
                       Text="{Binding LondonLocalTime}"
                       Style="{StaticResource LocalTimeStyle}"
                       HorizontalAlignment="Center"
                       Margin="12,10,8,0"
                       VerticalAlignment="Top"/>
                        <Grid Grid.Column="3"
                  Width="60" Height="60"
                  HorizontalAlignment="Left"
                  Margin="-10,0,0,0"
                  VerticalAlignment="Center">
                            <Ellipse Stroke="#DDDDDD" StrokeThickness="6"/>
                            <Path   Stroke="{Binding LondonStatus, Converter={StaticResource StatusToBrushConverter}}"
                      StrokeThickness="6"
                      Data="{Binding LondonProgress, Converter={StaticResource ProgressToArcConverter}}"/>
                            <TextBlock Text="{Binding LondonStatus}"
                         FontSize="10"
                         FontWeight="Bold"
                         Foreground="#222222"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
                        </Grid>
                        <!-- glowing dot -->
                        <Grid Grid.Column="0"
                  Width="20" Height="20"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Margin="6">
                            <Ellipse Width="20" Height="20" Opacity="0.3">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding LondonStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding LondonStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                                <Ellipse.Effect>
                                    <BlurEffect Radius="6"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <Ellipse Width="12" Height="12"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding LondonStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding LondonStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Repeat the same structure for New York, Sydney, Tokyo -->
                <!-- … New York … -->
                <Border Background="White" CornerRadius="12" Margin="4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>
                        <Image Grid.Column="0"
                   Source="pack://siteoforigin:,,,/Icons/New_York.png"
                   Width="70" Height="70"
                   HorizontalAlignment="Center"
                   Margin="10,0,0,0"
                   VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Stretch">
                            <!-- City name, centered -->
                            <TextBlock Text="New York"
                                       FontSize="14"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                            <!-- Big offset display, bold, larger, centered -->
                            <TextBlock Text="{Binding NewYorkDisplay}"
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock Grid.Column="2"
                       Text="{Binding NewYorkLocalTime}"
                       Style="{StaticResource LocalTimeStyle}"
                       HorizontalAlignment="Center"
                       Margin="12,10,8,0"
                       VerticalAlignment="Top"/>
                        <Grid Grid.Column="3"
                  Width="60" Height="60"
                  HorizontalAlignment="Center"
                  Margin="-20,0,0,0"
                  VerticalAlignment="Center">
                            <Ellipse Stroke="#DDDDDD" StrokeThickness="6"/>
                            <Path   Stroke="{Binding NewYorkStatus, Converter={StaticResource StatusToBrushConverter}}"
                      StrokeThickness="6"
                      Data="{Binding NewYorkProgress, Converter={StaticResource ProgressToArcConverter}}"/>
                            <TextBlock Text="{Binding NewYorkStatus}"
                         FontSize="10"
                         FontWeight="Bold"
                         Foreground="#222222"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
                        </Grid>
                        <Grid Grid.Column="0"
                  Width="20" Height="20"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Margin="6">
                            <Ellipse Width="20" Height="20" Opacity="0.3">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding NewYorkStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding NewYorkStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                                <Ellipse.Effect>
                                    <BlurEffect Radius="6"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <Ellipse Width="12" Height="12"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding NewYorkStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding NewYorkStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Sydney -->
                <Border Background="White" CornerRadius="12" Margin="4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>
                        <Image Grid.Column="0"
                   Source="pack://siteoforigin:,,,/Icons/Sydney.png"
                   Width="70" Height="70"
                   HorizontalAlignment="Center"
                   Margin="10,0,0,0"
                   VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Stretch">
                            <!-- City name, centered -->
                            <TextBlock Text="Sydney"
                                       FontSize="14"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                            <!-- Big offset display, bold, larger, centered -->
                            <TextBlock Text="{Binding SydneyDisplay}"
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock Grid.Column="2"
                       Text="{Binding SydneyLocalTime}"
                       Style="{StaticResource LocalTimeStyle}"
                       HorizontalAlignment="Center"
                       Margin="12,10,8,0"
                       VerticalAlignment="Top"/>
                        <Grid Grid.Column="3"
                  Width="60" Height="60"
                  HorizontalAlignment="Center"
                  Margin="-20,0,0,0"
                  VerticalAlignment="Center">
                            <Ellipse Stroke="#DDDDDD" StrokeThickness="6"/>
                            <Path   Stroke="{Binding SydneyStatus, Converter={StaticResource StatusToBrushConverter}}"
                      StrokeThickness="6"
                      Data="{Binding SydneyProgress, Converter={StaticResource ProgressToArcConverter}}"/>
                            <TextBlock Text="{Binding SydneyStatus}"
                         FontSize="10"
                         FontWeight="Bold"
                         Foreground="#222222"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
                        </Grid>
                        <Grid Grid.Column="0"
                  Width="20" Height="20"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Margin="6">
                            <Ellipse Width="20" Height="20" Opacity="0.3">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding SydneyStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding SydneyStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                                <Ellipse.Effect>
                                    <BlurEffect Radius="6"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <Ellipse Width="12" Height="12"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding SydneyStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding SydneyStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>
                        </Grid>
                    </Grid>
                </Border>

                <!-- Tokyo -->
                <Border Background="White" CornerRadius="12" Margin="4">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                            <ColumnDefinition Width="60"/>
                        </Grid.ColumnDefinitions>
                        <Image Grid.Column="0"
                   Source="pack://siteoforigin:,,,/Icons/Tokyo.png"
                   Width="60" Height="60"
                   HorizontalAlignment="Center"
                   Margin="10,0,0,0"
                   VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Stretch">
                            <!-- City name, centered -->
                            <TextBlock Text="Tokyo"
                                       FontSize="14"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                            <!-- Big offset display, bold, larger, centered -->
                            <TextBlock Text="{Binding TokyoDisplay}"
                                       FontSize="32"
                                       FontWeight="Bold"
                                       Foreground="#222222"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>

                        <TextBlock Grid.Column="2"
                       Text="{Binding TokyoLocalTime}"
                       Style="{StaticResource LocalTimeStyle}"
                       HorizontalAlignment="Center"
                       Margin="12,10,8,0"
                       VerticalAlignment="Top"/>
                        <Grid Grid.Column="3"
                  Width="60" Height="60"
                  HorizontalAlignment="Center"
                  Margin="-20,0,0,0"
                  VerticalAlignment="Center">
                            <Ellipse Stroke="#DDDDDD" StrokeThickness="6"/>
                            <Path   Stroke="{Binding TokyoStatus, Converter={StaticResource StatusToBrushConverter}}"
                      StrokeThickness="6"
                      Data="{Binding TokyoProgress, Converter={StaticResource ProgressToArcConverter}}"/>
                            <TextBlock Text="{Binding TokyoStatus}"
                         FontSize="10"
                         FontWeight="Bold"
                         Foreground="#222222"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
                        </Grid>
                        <Grid Grid.Column="0"
                  Width="20" Height="20"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Margin="6">
                            <Ellipse Width="20" Height="20" Opacity="0.3">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding TokyoStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding TokyoStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                                <Ellipse.Effect>
                                    <BlurEffect Radius="6"/>
                                </Ellipse.Effect>
                            </Ellipse>
                            <Ellipse Width="12" Height="12"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center">
                                <Ellipse.Style>
                                    <Style TargetType="Ellipse">
                                        <Setter Property="Fill" Value="Gray"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding TokyoStatus}" Value="OPEN">
                                                <Setter Property="Fill" Value="#40C832"/>
                                            </DataTrigger>
                                            <DataTrigger Binding="{Binding TokyoStatus}" Value="CLOSED">
                                                <Setter Property="Fill" Value="#EB5757"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Ellipse.Style>
                            </Ellipse>
                        </Grid>
                    </Grid>
                </Border>
            </UniformGrid>

            <!-- =================================== -->
      <!--  “UP NEXT” Section (Row 1)          -->
      <!-- =================================== -->
      <Border
        Grid.Row="1"
        Background="White"
        CornerRadius="12"
        Margin="8"
        Padding="0">
        <Grid Margin="12">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
          </Grid.RowDefinitions>

          <!-- Header -->
          <Grid Grid.Row="0" Margin="160,0,160,8">
            <Grid.ColumnDefinitions>
              <ColumnDefinition/>
              <ColumnDefinition Width="Auto"/>
              <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Rectangle Grid.Column="0" Height="1" Fill="#222222" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <TextBlock Grid.Column="1"
                       Text="UP NEXT"
                       FontSize="16"
                       FontWeight="Bold"
                       Foreground="#222222"
                       VerticalAlignment="Center"/>
            <Rectangle Grid.Column="2" Height="1" Fill="#222222" VerticalAlignment="Center" Margin="5,0,0,0"/>
          </Grid>

          <!-- Aligned, scrollable list -->
          <ListView
              Grid.Row="1"
              ItemsSource="{Binding UpcomingEvents}"
              ScrollViewer.VerticalScrollBarVisibility="Hidden">

            <!-- Remove the default padding so our grid fills edge‑to‑edge -->
            <ListView.ItemContainerStyle>
              <Style TargetType="ListViewItem">
                <Setter Property="Padding" Value="0"/>
              </Style>
            </ListView.ItemContainerStyle>

            <ListView.ItemTemplate>
              <DataTemplate>
                <Grid Margin="0,4">
                  <Grid.ColumnDefinitions>
                    <!-- 1) Time stamp now Auto -->
                    <ColumnDefinition Width="Auto"/>
                    <!-- 2) Currency tag -->
                    <ColumnDefinition Width="60"/>
                    <!-- 3) Impact icon -->
                    <ColumnDefinition Width="30"/>
                    <!-- 4) Title (fills remaining) -->
                    <ColumnDefinition Width="*"/>
                  </Grid.ColumnDefinitions>

                  <!-- 1) Time, right‑aligned with small right margin -->
                  <TextBlock Grid.Column="0"
                             Text="{Binding Time}"
                             FontSize="13"
                             Foreground="#222222"
                             VerticalAlignment="Center"
                             HorizontalAlignment="Right"
                             Margin="0,0,8,0"/>

                  <!-- 2) Currency tag (no extra Margin) -->
                  <Border Grid.Column="1"
                          Style="{StaticResource CurrencyTagStyle}"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center">
                    <TextBlock Text="{Binding Currency}"
                               FontSize="12"
                               FontWeight="Bold"
                               Foreground="White"/>
                  </Border>

                  <!-- 3) Folder icon, colored by Impact -->
                  <TextBlock Grid.Column="2"
                             FontFamily="Segoe MDL2 Assets"
                             Text=""
                             FontSize="14"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center"
                             Foreground="{Binding Impact, Converter={StaticResource ImpactToBrushConverter}}"/>

                  <!-- 4) Event title -->
                  <TextBlock Grid.Column="3"
                             Text="{Binding Title}"
                             FontSize="13"
                             Foreground="#222222"
                             VerticalAlignment="Center"
                             Margin="8,0,0,0"
                             TextTrimming="CharacterEllipsis"/>
                </Grid>
              </DataTemplate>
            </ListView.ItemTemplate>
          </ListView>
        </Grid>
      </Border>


            <!-- settings gear in bottom-right of tile area -->
            <Image Grid.Row="0"
             Source="pack://siteoforigin:,,,/Icons/Settings.png"
             Width="18"
             Height="18"
             HorizontalAlignment="Right"
             VerticalAlignment="Bottom"
             Margin="0,0,12,-7"
             MouseLeftButtonUp="OpenSettings_Click"/>

            <!-- =========================== -->
            <!--  SETTINGS OVERLAY (hidden)  -->
            <!-- =========================== -->
            <Grid x:Name="SettingsOverlay"
                  Visibility="Collapsed"
                  Background="#88000000"    
                  Grid.RowSpan="3">
                <!-- span all rows -->
                <Border Width="300"
                        Height="350"
                        Background="White"
                        CornerRadius="8"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Padding="16">
                    <StackPanel>
                        <TextBlock Text="Settings"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Margin="0,0,0,12"/>
                        <StackPanel Margin="0,0,0,12">
                            <!-- example setting -->
                            <CheckBox Content="Show seconds in clock"
                                      IsChecked="{Binding ShowSeconds, Mode=TwoWay}"/>
                            <CheckBox Content="Use 24‑hour format"
                                      IsChecked="{Binding Use24Hour, Mode=TwoWay}"
                                      Margin="0,8,0,0"/>
                            <!-- add your own toggles/sliders here -->
                            <TextBlock Text="Show Currency Pairs" FontWeight="SemiBold" Margin="0,8,0,4"/>
                            <UniformGrid Columns="2" Margin="0,0,0,12">
                                <CheckBox x:Name="AUDCheck" Content="AUD" IsChecked="True"/>
                                <CheckBox x:Name="CADCheck" Content="CAD" IsChecked="True"/>
                                <CheckBox x:Name="CHFCheck" Content="CHF" IsChecked="True"/>
                                <CheckBox x:Name="CNYCheck" Content="CNY" IsChecked="True"/>
                                <CheckBox x:Name="EURCheck" Content="EUR" IsChecked="True"/>
                                <CheckBox x:Name="GBPCheck" Content="GBP" IsChecked="True"/>
                                <CheckBox x:Name="JPYCheck" Content="JPY" IsChecked="True"/>
                                <CheckBox x:Name="NZDCheck" Content="NZD" IsChecked="True"/>
                                <CheckBox x:Name="USDCheck" Content="USD" IsChecked="True"/>
                            </UniformGrid>
                            <!-- Impact‑level filter -->
                            <TextBlock Text="Show News Impact" FontWeight="SemiBold" Margin="0,8,0,4"/>
                            <UniformGrid Columns="2" Margin="0,0,0,12">
                                <CheckBox x:Name="HighImpactCheck"   Content="High"    IsChecked="True"/>
                                <CheckBox x:Name="MediumImpactCheck" Content="Medium"  IsChecked="True"/>
                                <CheckBox x:Name="LowImpactCheck"    Content="Low"     IsChecked="True"/>
                                <CheckBox x:Name="HolidayImpactCheck" Content="Holiday" IsChecked="True"/>
                            </UniformGrid>
                        </StackPanel>
                        <Button Content="Close"
                                Width="80"
                                HorizontalAlignment="Right"
                                Click="CloseSettings_Click"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- date pill on grey background (Row 2) -->
            <Border Grid.Row="2"
              Background="White"
              CornerRadius="8"
              HorizontalAlignment="Left"
              VerticalAlignment="Center"
              Margin="12"
              Padding="6,2">
                <TextBlock Text="{Binding TodayDate}"
                   FontSize="12"
                   Foreground="#222222"/>
                <Border.Effect>
                    <DropShadowEffect Color="#000000"
                            BlurRadius="4"
                            Opacity="0.2"
                            Direction="270"
                            ShadowDepth="1"/>
                </Border.Effect>
            </Border>
        </Grid>
    </Border>
</Window>
